<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Holy Qur'an - The Believers</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/pages.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/QuranWBW/fonts@latest/dist/v4.2.1/QuranWBW.css" rel="stylesheet">
    <style>
        /* Mode Selection */
        .mode-selection {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            margin: 3rem 0;
            flex-wrap: wrap;
        }

        .mode-card {
            background: linear-gradient(135deg, var(--color-primary-light) 0%, rgba(45, 212, 20, 0.05) 100%);
            border: 2px solid var(--color-neon-green);
            border-radius: 1.5rem;
            padding: 2.5rem 2rem;
            width: 300px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            box-shadow: 0 0 20px rgba(45, 212, 20, 0.2);
        }

        .mode-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 0 40px var(--color-neon-green);
            border-color: var(--color-gold);
        }

        .mode-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .mode-title {
            font-size: 1.5rem;
            color: var(--color-neon-green);
            font-weight: 600;
            margin-bottom: 0.75rem;
            text-shadow: 0 0 10px rgba(45, 212, 20, 0.3);
        }

        .mode-description {
            font-size: 0.95rem;
            color: var(--color-gray-400);
            line-height: 1.6;
        }

        .back-to-modes {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: rgba(45, 212, 20, 0.1);
            border: 2px solid var(--color-neon-green);
            border-radius: 0.75rem;
            color: var(--color-neon-green);
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
            font-weight: 500;
        }

        .back-to-modes:hover {
            background: var(--color-neon-green);
            color: #000;
            transform: translateX(-5px);
        }

        .hidden {
            display: none !important;
        }

        body.light-mode .mode-card {
            background: linear-gradient(135deg, #ffffff 0%, rgba(45, 212, 20, 0.02) 100%);
        }

        body.light-mode .mode-title {
            color: #1a9906;
        }

        body.light-mode .mode-description {
            color: #6b7280;
        }

        .quran-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .surah-card {
            background: linear-gradient(135deg, var(--color-primary-light) 0%, rgba(45, 212, 20, 0.05) 100%);
            border: 2px solid var(--color-neon-green);
            border-radius: 1rem;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(45, 212, 20, 0.2);
        }

        .surah-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 20px var(--color-neon-green), inset 0 0 15px rgba(45, 212, 20, 0.1);
        }

        .surah-number {
            font-size: 1rem;
            color: var(--color-white);
            margin-bottom: 0.75rem;
            font-weight: 500;
            opacity: 0.9;
        }

        .surah-arabic {
            font-size: 1.75rem;
            color: var(--color-neon-green);
            font-family: 'Amiri', serif;
            text-align: right;
            margin: 1rem 0;
            line-height: 1.8;
            text-shadow: 0 0 10px rgba(45, 212, 20, 0.3);
        }

        .surah-english {
            font-size: 1.125rem;
            color: var(--color-white);
            margin-bottom: 0.75rem;
            font-weight: 500;
        }

        .surah-info {
            font-size: 0.875rem;
            color: var(--color-gray-400);
            display: flex;
            justify-content: space-between;
            padding-top: 1rem;
            border-top: 1px solid rgba(45, 212, 20, 0.2);
        }

        .search-box {
            max-width: 500px;
            margin: 2rem auto;
        }

        .quran-search {
            width: 100%;
            padding: 1rem;
            background: var(--color-primary-light);
            border: 2px solid var(--color-neon-green);
            border-radius: 0.75rem;
            color: var(--color-white);
            font-size: 1rem;
        }

        .quran-search::placeholder {
            color: var(--color-gray-400);
        }

        .quran-search:focus {
            outline: none;
            box-shadow: 0 0 15px var(--color-neon-green);
        }

        /* Indo-Pak Nastaleeq Text */
        .indopak-text {
            font-family: 'QuranWBW', serif;
            font-size: 1.4rem;
            line-height: 2.2;
            text-align: right;
            direction: rtl;
        }

        body.light-mode .surah-card {
            background: linear-gradient(135deg, #ffffff 0%, rgba(45, 212, 20, 0.02) 100%);
            border-color: #2DD414;
        }

        body.light-mode .surah-arabic {
            color: #2DD414;
        }

        body.light-mode .quran-search {
            background: #f5f5f5;
            color: #000;
            border-color: #2DD414;
        }

        /* Mushaf Full Page */
        .mushaf-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: var(--color-primary);
            z-index: 1000;
            overflow-y: auto;
            flex-direction: column;
        }

        .mushaf-modal.active {
            display: flex;
        }

        .mushaf-content {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 2rem;
            max-width: 100%;
            width: 100%;
            max-height: none;
            overflow-y: auto;
            box-shadow: none;
            position: relative;
            flex: 1;
        }

        .mushaf-header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--color-neon-green);
            position: sticky;
            top: 0;
            background: var(--color-primary);
            z-index: 10;
        }

        .mushaf-title {
            font-size: 2.5rem;
            color: var(--color-neon-green);
            font-family: 'Amiri', serif;
            margin: 1rem 0;
            text-shadow: 0 0 10px rgba(45, 212, 20, 0.3);
        }

        .mushaf-close {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: var(--color-neon-green);
            color: #000;
            border: none;
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            font-size: 1.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            box-shadow: 0 0 15px var(--color-neon-green);
        }

        .mushaf-close:hover {
            transform: rotate(90deg) scale(1.1);
            box-shadow: 0 0 25px var(--color-neon-green);
        }

        .mushaf-verses {
            font-family: 'Amiri', serif;
            line-height: 2;
            text-align: right;
            direction: rtl;
            color: var(--color-white);
        }

        .ayah-block {
            background: linear-gradient(135deg, rgba(45, 212, 20, 0.05) 0%, transparent 100%);
            border: 1px solid rgba(45, 212, 20, 0.2);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            min-height: 320px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

        .ayah-text {
            font-size: 1.5rem;
            margin: 0;
            line-height: 2.2;
            word-spacing: 0.5rem;
        }

        .ayah-number {
            color: var(--color-neon-green);
            font-weight: bold;
            margin: 0 0.5rem;
            text-shadow: 0 0 5px rgba(45, 212, 20, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 0.5rem;
            background: rgba(45, 212, 20, 0.1);
            border: 1px solid rgba(45, 212, 20, 0.3);
        }

        .ayah-number.no-click {
            cursor: default;
        }

        .ayah-number.no-click:hover {
            transform: none;
            box-shadow: none;
        }

        /* Translation Mode Styles */
        .ayah-container {
            background: linear-gradient(135deg, rgba(45, 212, 20, 0.05) 0%, transparent 100%);
            border: 1px solid rgba(45, 212, 20, 0.2);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .ayah-arabic {
            font-family: 'Amiri', serif;
            font-size: 1.75rem;
            line-height: 2.5;
            text-align: right;
            direction: rtl;
            color: var(--color-neon-green);
            margin-bottom: 1rem;
            text-shadow: 0 0 5px rgba(45, 212, 20, 0.2);
        }

        .ayah-translation {
            font-size: 1.05rem;
            line-height: 1.8;
            color: var(--color-white);
            padding: 1rem;
            background: rgba(255, 215, 0, 0.05);
            border-left: 3px solid var(--color-gold);
            border-radius: 0.5rem;
        }

        .ayah-number-badge {
            display: inline-block;
            background: var(--color-neon-green);
            color: #000;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            font-size: 0.875rem;
        }

        body.light-mode .ayah-translation {
            color: #111827;
            background: rgba(255, 215, 0, 0.08);
        }

        .ayah-number:hover {
            background: rgba(45, 212, 20, 0.2);
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(45, 212, 20, 0.5);
        }

        .ayah-number:active {
            transform: scale(0.95);
        }

        @media (max-width: 768px) {
            .mushaf-content {
                padding: 1.5rem;
                max-width: 100%;
            }

            .mushaf-title {
                font-size: 1.75rem;
            }

            .ayah-text {
                font-size: 1.25rem;
                line-height: 2;
                word-spacing: 0.3rem;
            }

            .ayah-block {
                min-height: 280px;
                padding: 1.25rem;
            }

            .mushaf-close {
                width: 2.5rem;
                height: 2.5rem;
                font-size: 1.5rem;
                top: 1.5rem;
                right: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .mushaf-content {
                padding: 1rem;
            }

            .ayah-text {
                font-size: 1.1rem;
                line-height: 1.9;
                word-spacing: 0.2rem;
            }

            .ayah-block {
                min-height: 240px;
                padding: 1rem;
            }

            .mushaf-title {
                font-size: 1.5rem;
            }

            .mushaf-close {
                width: 2.25rem;
                height: 2.25rem;
                font-size: 1.25rem;
                top: 1rem;
                right: 1rem;
            }

            .mushaf-header {
                margin-bottom: 1.5rem;
            }
        }

        /* Audio Player Styles */
        .audio-player-container {
            background: linear-gradient(135deg, rgba(45, 212, 20, 0.1) 0%, rgba(255, 215, 0, 0.05) 100%);
            border: 2px solid var(--color-neon-green);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 0 20px rgba(45, 212, 20, 0.2);
        }

        .audio-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .audio-title {
            color: var(--color-gold);
            font-size: 1.25rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .qari-selector {
            display: flex;
            gap: 0.5rem;
            background: rgba(0, 0, 0, 0.3);
            padding: 0.5rem;
            border-radius: 0.75rem;
        }

        .qari-btn {
            padding: 0.5rem 1rem;
            background: transparent;
            border: 1px solid var(--color-neon-green);
            color: var(--color-neon-green);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.875rem;
            font-weight: 500;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            min-width: 100px;
        }

        .qari-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .qari-style {
            font-size: 0.7rem;
            opacity: 0.8;
            font-weight: 400;
            font-style: italic;
        }

        .qari-btn:hover {
            background: rgba(45, 212, 20, 0.1);
            transform: scale(1.05);
        }

        .qari-btn.active {
            background: var(--color-neon-green);
            color: #000;
            box-shadow: 0 0 15px var(--color-neon-green);
        }

        .qari-btn.active .qari-style {
            opacity: 1;
        }

        .audio-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-top: 1rem;
        }

        .play-btn {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            background: var(--color-neon-green);
            border: none;
            color: #000;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 0 15px rgba(45, 212, 20, 0.5);
        }

        .play-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 25px var(--color-neon-green);
        }

        .play-btn svg {
            width: 1.5rem;
            height: 1.5rem;
            fill: #000;
        }

        .audio-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .current-ayah {
            color: var(--color-white);
            font-size: 0.875rem;
            font-weight: 500;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            cursor: pointer;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-neon-green), var(--color-gold));
            width: 0%;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px var(--color-neon-green);
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: var(--color-gray-400);
        }

        .nav-controls {
            display: flex;
            gap: 0.5rem;
        }

        .nav-btn {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            background: rgba(45, 212, 20, 0.2);
            border: 1px solid var(--color-neon-green);
            color: var(--color-neon-green);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: var(--color-neon-green);
            color: #000;
            transform: scale(1.1);
        }

        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .nav-btn:disabled:hover {
            background: rgba(45, 212, 20, 0.2);
            color: var(--color-neon-green);
            transform: scale(1);
        }

        body.light-mode .audio-player-container {
            background: linear-gradient(135deg, rgba(45, 212, 20, 0.08) 0%, rgba(255, 215, 0, 0.05) 100%);
        }

        body.light-mode .qari-selector {
            background: rgba(0, 0, 0, 0.05);
        }

        body.light-mode .qari-btn {
            border-color: #1a9906;
            color: #1a9906;
        }

        body.light-mode .qari-btn.active {
            background: #1a9906;
            color: #fff;
        }

        body.light-mode .current-ayah {
            color: #111827;
        }

        body.light-mode .progress-bar {
            background: rgba(0, 0, 0, 0.1);
        }

        /* Qari Selection Popup */
        .qari-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: rgba(26, 26, 26, 0.98);
            backdrop-filter: blur(20px);
            border: 2px solid var(--color-neon-green);
            border-radius: 1rem;
            padding: 2rem;
            z-index: 2000;
            box-shadow: 0 0 50px rgba(45, 212, 20, 0.4);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            max-width: 90%;
            width: 400px;
        }

        .qari-popup.active {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .qari-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .qari-popup-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .qari-popup-title {
            font-size: 1.5rem;
            color: var(--color-gold);
            margin-bottom: 0.5rem;
            text-align: center;
            font-weight: 600;
        }

        .qari-popup-ayah {
            font-size: 0.875rem;
            color: var(--color-gray-400);
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .qari-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .qari-option {
            background: linear-gradient(135deg, rgba(45, 212, 20, 0.1) 0%, transparent 100%);
            border: 2px solid rgba(45, 212, 20, 0.3);
            border-radius: 0.75rem;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .qari-option:hover {
            background: linear-gradient(135deg, rgba(45, 212, 20, 0.2) 0%, transparent 100%);
            border-color: var(--color-neon-green);
            transform: translateX(5px);
            box-shadow: 0 0 20px rgba(45, 212, 20, 0.3);
        }

        .qari-option-name {
            font-size: 1.125rem;
            color: var(--color-neon-green);
            font-weight: 600;
        }

        .qari-option-style {
            font-size: 0.875rem;
            color: var(--color-gold);
            font-style: italic;
        }

        .qari-popup-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            color: var(--color-white);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .qari-popup-close:hover {
            background: rgba(255, 0, 0, 0.3);
            transform: rotate(90deg);
        }

        body.light-mode .qari-popup {
            background: rgba(255, 255, 255, 0.98);
        }

        body.light-mode .qari-popup-ayah {
            color: #6b7280;
        }

        body.light-mode .qari-option {
            background: linear-gradient(135deg, rgba(45, 212, 20, 0.08) 0%, transparent 100%);
        }

        body.light-mode .qari-option:hover {
            background: linear-gradient(135deg, rgba(45, 212, 20, 0.15) 0%, transparent 100%);
        }

        body.light-mode .qari-option-name {
            color: #1a9906;
        }

        body.light-mode .qari-option-style {
            color: #b8860b;
        }

        /* Coming Soon Modal */
        .coming-soon-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .coming-soon-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .coming-soon-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: rgba(26, 26, 26, 0.98);
            backdrop-filter: blur(20px);
            border: 2px solid var(--color-neon-green);
            border-radius: 1.5rem;
            padding: 3rem 2.5rem;
            z-index: 2000;
            box-shadow: 0 0 60px rgba(45, 212, 20, 0.4);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            max-width: 90%;
            width: 450px;
            text-align: center;
        }

        .coming-soon-modal.active {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .coming-soon-icon {
            font-size: 5rem;
            margin-bottom: 1.5rem;
            animation: bounceIcon 2s ease-in-out infinite;
        }

        @keyframes bounceIcon {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .coming-soon-title {
            font-size: 2rem;
            color: var(--color-neon-green);
            font-weight: 700;
            margin-bottom: 1rem;
            text-shadow: 0 0 20px rgba(45, 212, 20, 0.5);
        }

        .coming-soon-text {
            font-size: 1.05rem;
            color: var(--color-gray-300);
            line-height: 1.8;
            margin-bottom: 2rem;
        }

        .coming-soon-subtitle {
            font-size: 0.95rem;
            color: var(--color-gold);
            font-weight: 600;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(45, 212, 20, 0.2);
        }

        .coming-soon-btn {
            margin-top: 2rem;
            padding: 0.75rem 2.5rem;
            background: var(--color-neon-green);
            color: #000;
            border: none;
            border-radius: 0.75rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(45, 212, 20, 0.3);
        }

        .coming-soon-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 40px var(--color-neon-green);
        }

        .coming-soon-btn:active {
            transform: scale(0.95);
        }

        body.light-mode .coming-soon-modal {
            background: rgba(255, 255, 255, 0.98);
        }

        body.light-mode .coming-soon-title {
            color: #1a9906;
        }

        body.light-mode .coming-soon-text {
            color: #111827;
        }

        body.light-mode .coming-soon-subtitle {
            color: #b8860b;
        }

        @media (max-width: 768px) {
            .coming-soon-modal {
                width: 90%;
                padding: 2rem 1.5rem;
            }

            .coming-soon-title {
                font-size: 1.75rem;
            }

            .coming-soon-text {
                font-size: 0.95rem;
            }

            .coming-soon-icon {
                font-size: 3.5rem;
            }
        }

        @media (max-width: 480px) {
            .coming-soon-modal {
                width: 85%;
                padding: 1.5rem 1.25rem;
            }

            .coming-soon-title {
                font-size: 1.5rem;
            }

            .coming-soon-text {
                font-size: 0.9rem;
            }

            .coming-soon-icon {
                font-size: 3rem;
            }
        }

        /* Bookmarks & Favorites Section */
        .bookmark-section {
            background: linear-gradient(135deg, rgba(45, 212, 20, 0.08) 0%, rgba(0, 0, 0, 0.2) 100%);
            border: 2px solid rgba(45, 212, 20, 0.3);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .bookmark-title {
            color: var(--color-gold);
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .bookmark-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .bookmark-item, .favorite-item {
            background: linear-gradient(135deg, rgba(45, 212, 20, 0.1) 0%, rgba(0, 0, 0, 0.1) 100%);
            border: 1px solid rgba(45, 212, 20, 0.3);
            border-radius: 0.75rem;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: start;
        }

        .bookmark-item:hover, .favorite-item:hover {
            background: linear-gradient(135deg, rgba(45, 212, 20, 0.15) 0%, rgba(0, 0, 0, 0.15) 100%);
            border-color: var(--color-neon-green);
            box-shadow: 0 4px 15px rgba(45, 212, 20, 0.2);
        }

        .bookmark-info, .favorite-info {
            flex: 1;
        }

        .bookmark-surah, .favorite-surah {
            color: var(--color-neon-green);
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }

        .bookmark-text, .favorite-text {
            color: var(--color-gray-400);
            font-size: 0.875rem;
        }

        .bookmark-remove-btn, .favorite-remove-btn {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #ef4444;
            padding: 0.5rem 0.75rem;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 0.75rem;
            transition: all 0.2s ease;
            white-space: nowrap;
            margin-left: 0.5rem;
        }

        .bookmark-remove-btn:hover, .favorite-remove-btn:hover {
            background: rgba(239, 68, 68, 0.2);
            border-color: #ef4444;
        }

        .no-bookmarks, .no-favorites {
            color: var(--color-gray-400);
            text-align: center;
            padding: 2rem 1rem;
            font-style: italic;
        }

        body.light-mode .bookmark-section {
            background: linear-gradient(135deg, rgba(45, 212, 20, 0.05) 0%, rgba(0, 0, 0, 0.02) 100%);
            border-color: rgba(26, 153, 6, 0.3);
        }

        body.light-mode .bookmark-item, body.light-mode .favorite-item {
            background: linear-gradient(135deg, rgba(45, 212, 20, 0.08) 0%, rgba(0, 0, 0, 0.05) 100%);
            border-color: rgba(26, 153, 6, 0.3);
        }

        body.light-mode .bookmark-surah, body.light-mode .favorite-surah {
            color: #1a9906;
        }

        body.light-mode .bookmark-text, body.light-mode .favorite-text {
            color: #6b7280;
        }

        body.light-mode .bookmark-title {
            color: #b8860b;
        }

        /* Ayah Save Popup */
        .ayah-save-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2099;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .ayah-save-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .ayah-save-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: rgba(26, 26, 26, 0.98);
            backdrop-filter: blur(20px);
            border: 2px solid var(--color-neon-green);
            border-radius: 1.5rem;
            padding: 2.5rem 2rem;
            z-index: 2100;
            box-shadow: 0 0 60px rgba(45, 212, 20, 0.4);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            max-width: 90%;
            width: 500px;
        }

        .ayah-save-modal.active {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .ayah-save-title {
            color: var(--color-neon-green);
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .ayah-save-ref {
            color: var(--color-gray-400);
            text-align: center;
            margin-bottom: 2rem;
            font-size: 1rem;
        }

        .ayah-save-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .ayah-save-btn {
            padding: 1.25rem;
            border: 2px solid rgba(45, 212, 20, 0.3);
            background: linear-gradient(135deg, rgba(45, 212, 20, 0.1) 0%, transparent 100%);
            color: var(--color-neon-green);
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.05rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .ayah-save-btn:hover {
            background: linear-gradient(135deg, rgba(45, 212, 20, 0.2) 0%, transparent 100%);
            border-color: var(--color-neon-green);
            transform: translateX(8px);
            box-shadow: 0 0 20px rgba(45, 212, 20, 0.3);
        }

        .ayah-save-icon {
            font-size: 1.5rem;
        }

        .ayah-save-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            color: var(--color-white);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .ayah-save-close:hover {
            background: rgba(255, 0, 0, 0.3);
            transform: rotate(90deg);
        }

        body.light-mode .ayah-save-modal {
            background: rgba(255, 255, 255, 0.98);
        }

        body.light-mode .ayah-save-btn {
            background: linear-gradient(135deg, rgba(45, 212, 20, 0.08) 0%, transparent 100%);
            border-color: rgba(26, 153, 6, 0.3);
            color: #1a9906;
        }

        body.light-mode .ayah-save-btn:hover {
            background: linear-gradient(135deg, rgba(45, 212, 20, 0.15) 0%, transparent 100%);
            border-color: #1a9906;
        }

        body.light-mode .ayah-save-title {
            color: #1a9906;
        }

        body.light-mode .ayah-save-ref {
            color: #6b7280;
        }

        /* Pulse animation for highlighting */
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        /* Custom Toast Notification */
        .custom-toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: rgba(26, 26, 26, 0.98);
            backdrop-filter: blur(20px);
            border: 2px solid var(--color-neon-green);
            border-radius: 1.5rem;
            padding: 2.5rem 3rem;
            z-index: 2500;
            box-shadow: 0 0 60px rgba(45, 212, 20, 0.4);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            max-width: 90%;
            width: 500px;
            text-align: center;
        }

        .custom-toast.active {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .custom-toast-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2499;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .custom-toast-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .custom-toast-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: inline-block;
        }

        .custom-toast-message {
            color: var(--color-neon-green);
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            text-shadow: 0 0 10px rgba(45, 212, 20, 0.3);
        }

        .custom-toast-button {
            padding: 0.75rem 2rem;
            background: var(--color-neon-green);
            color: #000;
            border: none;
            border-radius: 0.75rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(45, 212, 20, 0.3);
        }

        .custom-toast-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 40px var(--color-neon-green);
        }

        .custom-toast-button:active {
            transform: scale(0.95);
        }

        body.light-mode .custom-toast {
            background: rgba(255, 255, 255, 0.98);
            border-color: #1a9906;
        }

        body.light-mode .custom-toast-message {
            color: #1a9906;
            text-shadow: none;
        }
    </style>
</head>
<body class="dark-mode">
    <nav class="navbar scrolled" id="navbar">
        <div class="container">
            <div class="nav-content">
                <a href="index.html" class="logo">
                    <div class="logo-icon"><img src="images/logo.png" alt="The Believers logo"></div>
                    <span class="logo-text">The Believers</span>
                </a>
                <div class="nav-links" id="navLinks">
                    <a href="index.html" class="nav-link">Home</a>
                    <div class="dropdown">
                        <a href="#" class="nav-link">Islamic Tools ‚ñæ</a>
                        <div class="dropdown-content">
                            <a href="prayer-times.html">Prayer Times</a>
                            <a href="quran.html">Qur'an</a>
                            <a href="zakat.html">Zakat Calculator</a>
                            <a href="calendar.html">Calendar</a>
                            <a href="mosque-finder.html">Mosque Finder</a>
                        </div>
                    </div>
                    <a href="live.html" class="nav-link">Live Streams</a>
                    <a href="subjects.html" class="nav-link">Learn</a>
                    <a href="multimedia.html" class="nav-link">Multimedia</a>
                    <a href="counter.html" class="nav-link">Counter</a>
                    <a href="contact.html" class="nav-link">Contact</a>
                    <a href="suggestions.html" class="nav-link">Suggestions</a>
                </div>
                <div class="nav-actions">
                    <button class="icon-btn" id="themeToggle">
                        <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="10" cy="10" r="4"/><path d="M10 1v2m0 14v2M3 10H1m4-7L3 1m14 2l-2 2M21 10h-2m-2 7l2 2M5 19l2-2"/>
                        </svg>
                    </button>
                    <button class="menu-toggle" id="menuToggle">
                        <span></span><span></span><span></span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <main class="page-content">
        <div class="container">
            <div class="page-header">
                <h1 class="page-title neon-text">The Holy Qur'an</h1>
                <p class="page-subtitle">All 114 Surahs - ÿ®ÿ≥ŸÖ ÿßŸÑŸÑŸá ÿßŸÑÿ±ÿ≠ŸÖŸÜ ÿßŸÑÿ±ÿ≠ŸäŸÖ</p>
            </div>

            <!-- Mode Selection -->
            <div id="modeSelection" class="mode-selection">
                <div class="mode-card" onclick="selectMode('reading')">
                    <div class="mode-icon">üìñ</div>
                    <h3 class="mode-title">Reading Mode</h3>
                    <p class="mode-description">Read the Quran in beautiful Arabic script without distractions</p>
                </div>
                <div class="mode-card" onclick="selectMode('audio')">
                    <div class="mode-icon">üéß</div>
                    <h3 class="mode-title">Audio Mode</h3>
                    <p class="mode-description">Listen to Quranic recitation by famous Qaris while reading</p>
                </div>
                <div class="mode-card" onclick="showComingSoon()">
                    <div class="mode-icon">üåê</div>
                    <h3 class="mode-title">With Translation</h3>
                    <p class="mode-description">Read the Quran with English translation side by side</p>
                    <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(45, 212, 20, 0.2); color: var(--color-gold); font-weight: 600; font-size: 0.9rem;">Coming Soon üöÄ</div>
                </div>
            </div>

            <!-- Bookmarks Section -->
            <div class="bookmark-section">
                <h3 class="bookmark-title">üìç Your Bookmark</h3>
                <div id="bookmarkContent">
                    <div class="no-bookmarks">No bookmark set yet. Click "Set Bookmark" in any Surah to save your progress.</div>
                </div>
            </div>

            <!-- Favorites Section -->
            <div class="bookmark-section">
                <h3 class="bookmark-title">‚≠ê Favorite Ayahs</h3>
                <div id="favoritesContent">
                    <div class="no-favorites">No favorite ayahs yet. Click the heart icon in any Surah to add to favorites.</div>
                </div>
            </div>

            <!-- Surah Selection (Hidden initially) -->
            <div id="surahSelection" class="hidden">
                <button class="back-to-modes" onclick="backToModes()">
                    ‚Üê Back to Mode Selection
                </button>
                <div class="search-box">
                    <input type="text" id="surahSearch" class="quran-search" placeholder="Search Surah by name or number...">
                </div>
                <div class="quran-grid" id="quranGrid"></div>
            </div>
        </div>
    </main>

    <!-- Mushaf Modal -->
    <div class="mushaf-modal" id="mushafModal">
        <div class="mushaf-content">
            <button class="mushaf-close" onclick="closeMushaf()">‚úï</button>
            <div class="mushaf-header">
                <div style="flex: 1;">
                    <h2 class="mushaf-title" id="mushafTitle"></h2>
                    <p style="color: var(--color-gray-400);" id="mushafInfo"></p>
                </div>
            </div>
            
            <!-- Audio Player -->
            <div class="audio-player-container" id="audioPlayer">
                <div class="audio-header">
                    <div class="audio-title">
                        üéß Quran Recitation
                    </div>
                    <div class="qari-selector">
                        <button class="qari-btn active" onclick="selectQari('minshawi')" id="minshawi-btn">
                            <span class="qari-name">Minshawi</span>
                            <span class="qari-style">Murattal</span>
                        </button>
                        <button class="qari-btn" onclick="selectQari('abdulbasit')" id="abdulbasit-btn">
                            <span class="qari-name">Abdul Basit</span>
                            <span class="qari-style">Murattal</span>
                        </button>
                    </div>
                </div>
                
                <div class="audio-controls">
                    <button class="play-btn" onclick="togglePlayPause()" id="playPauseBtn">
                        <svg viewBox="0 0 24 24" id="playIcon">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                        <svg viewBox="0 0 24 24" id="pauseIcon" style="display: none;">
                            <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
                        </svg>
                    </button>
                    
                    <div class="audio-info">
                        <div class="current-ayah" id="currentAyahText">Select play to begin recitation</div>
                        <div class="progress-bar" onclick="seekAudio(event)">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <div class="time-display">
                            <span id="currentTime">0:00</span>
                            <span id="duration">0:00</span>
                        </div>
                    </div>
                    
                    <div class="nav-controls">
                        <button class="nav-btn" onclick="previousAyah()" id="prevBtn" title="Previous Ayah">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                            </svg>
                        </button>
                        <button class="nav-btn" onclick="nextAyah()" id="nextBtn" title="Next Ayah">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <audio id="audioElement" style="display: none;"></audio>
            </div>
            
            <div class="mushaf-verses" id="mushafVerses"></div>
        </div>
    </div>

    <!-- Qari Selection Popup -->
    <div class="qari-popup-overlay" id="qariPopupOverlay" onclick="closeQariPopup()"></div>
    <div class="qari-popup" id="qariPopup">
        <button class="qari-popup-close" onclick="closeQariPopup()">‚úï</button>
        <h3 class="qari-popup-title">Choose Qari</h3>
        <p class="qari-popup-ayah" id="selectedAyahInfo">Select a reciter to play this ayah</p>
        <div class="qari-options">
            <div class="qari-option" onclick="playAyahWithQari('minshawi')">
                <span class="qari-option-name">üéôÔ∏è Minshawi</span>
                <span class="qari-option-style">Murattal - Clear, measured recitation</span>
            </div>
            <div class="qari-option" onclick="playAyahWithQari('abdulbasit')">
                <span class="qari-option-name">üéôÔ∏è Abdul Basit</span>
                <span class="qari-option-style">Murattal - Clear, measured recitation</span>
            </div>
        </div>
    </div>

    <!-- Ayah Save Popup -->
    <div class="ayah-save-overlay" id="ayahSaveOverlay" onclick="closeAyahSavePopup()"></div>
    <div class="ayah-save-modal" id="ayahSaveModal">
        <button class="ayah-save-close" onclick="closeAyahSavePopup()">‚úï</button>
        <h3 class="ayah-save-title">Save Ayah</h3>
        <p class="ayah-save-ref" id="ayahSaveRef">Surah - Ayah</p>
        <div class="ayah-save-options">
            <button class="ayah-save-btn" onclick="saveAyahToFavorite()">
                <span class="ayah-save-icon">‚≠ê</span>
                <span>Add to Favorites</span>
            </button>
            <button class="ayah-save-btn" onclick="saveAyahAsBookmark()">
                <span class="ayah-save-icon">üìç</span>
                <span>Set as Bookmark</span>
            </button>
            <button class="ayah-save-btn" onclick="saveAyahToBoth()" style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, transparent 100%); border-color: rgba(255, 215, 0, 0.3); color: var(--color-gold);">
                <span class="ayah-save-icon">‚ú®</span>
                <span>Save to Both</span>
            </button>
        </div>
    </div>

    <!-- Coming Soon Modal -->
    <div class="coming-soon-overlay" id="comingSoonOverlay" onclick="closeComingSoon()"></div>
    <div class="coming-soon-modal" id="comingSoonModal">
        <div class="coming-soon-icon">üöÄ</div>
        <h2 class="coming-soon-title">Coming Soon!</h2>
        <p class="coming-soon-text">
            We're working on bringing you beautiful English translations alongside the Arabic text.
        </p>
        <p class="coming-soon-subtitle">
            Stay tuned for this exciting feature!
        </p>
        <button class="coming-soon-btn" onclick="closeComingSoon()">Got It</button>
    </div>

    <!-- Custom Toast Notification -->
    <div class="custom-toast-overlay" id="customToastOverlay" onclick="closeCustomToast()"></div>
    <div class="custom-toast" id="customToast">
        <div class="custom-toast-icon" id="customToastIcon">‚úì</div>
        <div class="custom-toast-message" id="customToastMessage">Success!</div>
        <button class="custom-toast-button" onclick="closeCustomToast()">OK</button>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <div class="footer-logo">
                        <div class="logo-icon"><img src="images/logo.png" alt="The Believers logo"></div>
                        <span class="logo-text">The Believers</span>
                    </div>
                    <p class="footer-desc">Your modern Islamic companion for prayer times, Qur'an study, and spiritual growth.</p>
                    <div class="social-links">
                        <a href="https://youtube.com" class="social-link" title="YouTube">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                            </svg>
                        </a>
                        <a href="https://tiktok.com" class="social-link" title="TikTok">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.1 1.74 2.89 2.89 0 0 1 2.31-4.64 2.88 2.88 0 0 1 .88.13V9.4a5.77 5.77 0 0 0-.94-.08A5.77 5.77 0 0 0 6.59 19a5.77 5.77 0 0 0 5.77 5.77 5.77 5.77 0 0 0 5.77-5.77V12.6a7.66 7.66 0 0 0 4.54 1.71v-3.5a4.83 4.83 0 0 1-1.18-.15z"/>
                            </svg>
                        </a>
                    </div>
                </div>

                <div class="footer-col">
                    <h3 class="footer-title">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="prayer-times.html">Prayer Times</a></li>
                        <li><a href="quran.html">Qur'an</a></li>
                        <li><a href="zakat.html">Zakat Calculator</a></li>
                        <li><a href="calendar.html">Calendar</a></li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h3 class="footer-title">Contact</h3>
                    <ul class="footer-contact">
                        <li>üìß info@thebelievers.com</li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h3 class="footer-title">Latest Videos</h3>
                    <div class="footer-videos">
                        <a href="#" class="video-link">Islamic Lecture 1</a>
                        <a href="#" class="video-link">Nasheed Collection</a>
                        <a href="#" class="video-link">Quran Recitation</a>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2025 The Believers. All rights reserved.</p>
                <div class="footer-bottom-links">
                    <a href="#">Privacy Policy</a>
                    <a href="#">Terms of Service</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script>
        // Audio player variables
        let currentQari = 'minshawi'; // minshawi or abdulbasit
        let currentSurahNumber = 1;
        let currentAyahNumber = 1;
        let totalAyahs = 0;
        let isPlaying = false;
        let audioElement = null;
        
        // Qari URLs (everyayah.com API)
        const qariURLs = {
            minshawi: 'https://everyayah.com/data/Mohammad_al_Tablaway_128kbps/', // Minshawi - Murattal (clear, measured recitation)
            abdulbasit: 'https://everyayah.com/data/Abdul_Basit_Murattal_192kbps/' // Abdul Basit - Murattal (clear, measured recitation)
        };
        
        const qariNames = {
            minshawi: 'Minshawi (Murattal)',
            abdulbasit: 'Abdul Basit (Murattal)'
        };
        
        let selectedAyahForPopup = null;
        let currentMode = null; // 'reading', 'audio', or 'translation'
        let targetAyahNumber = null; // For navigating to a specific ayah
        
        // ===== BOOKMARK & FAVORITES =====
        const BOOKMARKS_KEY = 'quran_bookmarks';
        const FAVORITES_KEY = 'quran_favorites';
        
        function saveBookmark(surahNumber, surahName, ayahNumber = null) {
            const bookmark = {
                surahNumber: surahNumber,
                surahName: surahName,
                ayahNumber: ayahNumber,
                timestamp: new Date().toLocaleString()
            };
            localStorage.setItem(BOOKMARKS_KEY, JSON.stringify(bookmark));
            displayBookmark();
        }
        
        function getBookmark() {
            const bookmark = localStorage.getItem(BOOKMARKS_KEY);
            return bookmark ? JSON.parse(bookmark) : null;
        }
        
        function removeBookmark() {
            localStorage.removeItem(BOOKMARKS_KEY);
            displayBookmark();
        }
        
        function openBookmark() {
            const bookmark = getBookmark();
            if (bookmark) {
                targetAyahNumber = bookmark.ayahNumber;
                selectMode('reading');
                setTimeout(() => {
                    const surahToFind = surahs.find(s => s.number === bookmark.surahNumber);
                    if (surahToFind) {
                        loadMushaf(surahToFind);
                    }
                }, 100);
            }
        }
        
        function displayBookmark() {
            const bookmarkContent = document.getElementById('bookmarkContent');
            const bookmark = getBookmark();
            
            if (!bookmark) {
                bookmarkContent.innerHTML = '<div class="no-bookmarks">No bookmark set yet. Click an ayah number to save your progress.</div>';
                return;
            }
            
            bookmarkContent.innerHTML = `
                <div class="bookmark-item" style="cursor: pointer;" onclick="openBookmark()">
                    <div class="bookmark-info">
                        <div class="bookmark-surah">${bookmark.surahName}${bookmark.ayahNumber ? ' - Ayah ' + bookmark.ayahNumber : ''}</div>
                        <div class="bookmark-text">Saved on ${bookmark.timestamp}</div>
                    </div>
                    <button class="bookmark-remove-btn" onclick="event.stopPropagation(); removeBookmark();">Remove</button>
                </div>
            `;
        }
        
        function addFavorite(ayahNumber, surahNumber, surahName, ayahText = '') {
            let favorites = getFavorites();
            const id = surahNumber + '-' + ayahNumber;
            
            if (!favorites.find(f => f.id === id)) {
                favorites.push({
                    id: id,
                    ayahNumber: ayahNumber,
                    surahNumber: surahNumber,
                    surahName: surahName,
                    ayahText: ayahText,
                    timestamp: new Date().toLocaleString()
                });
                localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));
            }
            displayFavorites();
        }
        
        function removeFavorite(id) {
            let favorites = getFavorites();
            favorites = favorites.filter(f => f.id !== id);
            localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));
            displayFavorites();
        }
        
        function getFavorites() {
            const favorites = localStorage.getItem(FAVORITES_KEY);
            return favorites ? JSON.parse(favorites) : [];
        }
        
        function displayFavorites() {
            const favoritesContent = document.getElementById('favoritesContent');
            const favorites = getFavorites();
            
            if (favorites.length === 0) {
                favoritesContent.innerHTML = '<div class="no-favorites">No favorite ayahs yet. Click an ayah number to add to favorites.</div>';
                return;
            }
            
            favoritesContent.innerHTML = favorites.map(fav => `
                <div class="favorite-item" style="cursor: pointer;" onclick="openFavoriteAyah(${fav.surahNumber}, ${fav.ayahNumber})">
                    <div class="favorite-info">
                        <div class="favorite-surah">${fav.surahName} - Ayah ${fav.ayahNumber}</div>
                        <div class="favorite-text">${fav.timestamp}</div>
                    </div>
                    <button class="favorite-remove-btn" onclick="event.stopPropagation(); removeFavorite('${fav.id}');">Remove</button>
                </div>
            `).join('');
        }
        
        function openFavoriteAyah(surahNumber, ayahNumber) {
            targetAyahNumber = ayahNumber;
            selectMode('reading');
            setTimeout(() => {
                const surahToFind = surahs.find(s => s.number === surahNumber);
                if (surahToFind) {
                    loadMushaf(surahToFind);
                }
            }, 100);
        }
        
        // Initialize bookmark and favorites display
        window.addEventListener('load', () => {
            displayBookmark();
            displayFavorites();
        });
        
        function saveBookmarkForCurrentSurah() {
            const title = document.getElementById('mushafTitle').textContent;
            const surahNum = currentSurahNumber;
            const surahName = surahs.find(s => s.number === surahNum)?.english || title;
            saveBookmark(surahNum, surahName);
            showCustomToast(`‚úì Bookmark saved for ${surahName}`, 'üìç');
        }
        
        function addFavoriteAyah() {
            const surahNum = currentSurahNumber;
            const surahName = surahs.find(s => s.number === surahNum)?.english || document.getElementById('mushafTitle').textContent;
            // Add favorite for the first ayah (or the current one being displayed)
            addFavorite(1, surahNum, surahName, `${surahName} Ayah 1`);
            showCustomToast(`‚úì Added to Favorites!`, '‚≠ê');
        }
        
        // ===== AYAH SAVE POPUP =====
        let selectedAyahForSave = null;
        
        function openAyahSavePopup(ayahNumber) {
            selectedAyahForSave = ayahNumber;
            const surah = surahs.find(s => s.number === currentSurahNumber);
            const surahName = surah ? surah.english : 'Surah ' + currentSurahNumber;
            
            document.getElementById('ayahSaveRef').textContent = `${surahName} - Ayah ${ayahNumber}`;
            document.getElementById('ayahSaveOverlay').classList.add('active');
            document.getElementById('ayahSaveModal').classList.add('active');
        }
        
        function closeAyahSavePopup() {
            document.getElementById('ayahSaveOverlay').classList.remove('active');
            document.getElementById('ayahSaveModal').classList.remove('active');
            selectedAyahForSave = null;
        }
        
        function saveAyahToFavorite() {
            if (selectedAyahForSave) {
                const surah = surahs.find(s => s.number === currentSurahNumber);
                const surahName = surah ? surah.english : 'Surah ' + currentSurahNumber;
                addFavorite(selectedAyahForSave, currentSurahNumber, surahName, `${surahName} Ayah ${selectedAyahForSave}`);
                closeAyahSavePopup();
                showCustomToast(`‚úì Saved to Favorites: ${surahName} - Ayah ${selectedAyahForSave}`, '‚≠ê');
            }
        }
        
        function saveAyahAsBookmark() {
            if (selectedAyahForSave) {
                const surah = surahs.find(s => s.number === currentSurahNumber);
                const surahName = surah ? surah.english : 'Surah ' + currentSurahNumber;
                const bookmarkText = `${surahName} - Ayah ${selectedAyahForSave}`;
                saveBookmark(currentSurahNumber, bookmarkText, selectedAyahForSave);
                closeAyahSavePopup();
                showCustomToast(`‚úì Bookmark Set: ${bookmarkText}`, 'üìç');
            }
        }
        
        function saveAyahToBoth() {
            if (selectedAyahForSave) {
                const surah = surahs.find(s => s.number === currentSurahNumber);
                const surahName = surah ? surah.english : 'Surah ' + currentSurahNumber;
                // Save to favorite
                addFavorite(selectedAyahForSave, currentSurahNumber, surahName, `${surahName} Ayah ${selectedAyahForSave}`);
                // Save as bookmark
                const bookmarkText = `${surahName} - Ayah ${selectedAyahForSave}`;
                saveBookmark(currentSurahNumber, bookmarkText, selectedAyahForSave);
                closeAyahSavePopup();
                showCustomToast(`‚úì Saved to Both: ${surahName} - Ayah ${selectedAyahForSave}`, '‚ú®');
            }
        }
        
        // ===== CUSTOM TOAST NOTIFICATION =====
        function showCustomToast(message, icon = '‚úì') {
            document.getElementById('customToastIcon').textContent = icon;
            document.getElementById('customToastMessage').textContent = message;
            document.getElementById('customToastOverlay').classList.add('active');
            document.getElementById('customToast').classList.add('active');
            
            // Auto close after 3 seconds
            setTimeout(() => {
                closeCustomToast();
            }, 3000);
        }
        
        function closeCustomToast() {
            document.getElementById('customToastOverlay').classList.remove('active');
            document.getElementById('customToast').classList.remove('active');
        }
        
        // Show coming soon message with themed modal
        function showComingSoon() {
            document.getElementById('comingSoonOverlay').classList.add('active');
            document.getElementById('comingSoonModal').classList.add('active');
        }
        
        // Close coming soon modal
        function closeComingSoon() {
            document.getElementById('comingSoonOverlay').classList.remove('active');
            document.getElementById('comingSoonModal').classList.remove('active');
        }
        
        // Close modal when pressing Escape
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeComingSoon();
            }
        });
        
        // Select reading mode
        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeSelection').classList.add('hidden');
            document.getElementById('surahSelection').classList.remove('hidden');
            renderSurahs();
        }
        
        // Back to mode selection
        function backToModes() {
            currentMode = null;
            document.getElementById('modeSelection').classList.remove('hidden');
            document.getElementById('surahSelection').classList.add('hidden');
            document.getElementById('quranGrid').innerHTML = '';
        }
        
        // Open Qari selection popup
        function openQariPopup(ayahNumber) {
            selectedAyahForPopup = ayahNumber;
            const surah = surahs.find(s => s.number === currentSurahNumber);
            const surahName = surah ? surah.english : 'Surah ' + currentSurahNumber;
            
            document.getElementById('selectedAyahInfo').textContent = 
                `${surahName} - Ayah ${ayahNumber}`;
            
            document.getElementById('qariPopupOverlay').classList.add('active');
            document.getElementById('qariPopup').classList.add('active');
        }
        
        // Close Qari selection popup
        function closeQariPopup() {
            document.getElementById('qariPopupOverlay').classList.remove('active');
            document.getElementById('qariPopup').classList.remove('active');
            selectedAyahForPopup = null;
        }
        
        // Play selected ayah with chosen Qari
        function playAyahWithQari(qari) {
            if (selectedAyahForPopup) {
                // Switch to selected qari
                currentQari = qari;
                
                // Update button states
                document.querySelectorAll('.qari-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.getElementById(qari + '-btn').classList.add('active');
                
                // Load and play the selected ayah
                loadAyah(currentSurahNumber, selectedAyahForPopup, true);
                
                // Close popup
                closeQariPopup();
                
                // Scroll to audio player
                document.getElementById('audioPlayer').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'nearest' 
                });
            }
        }
        
        // Initialize audio element
        function initAudio() {
            audioElement = document.getElementById('audioElement');
            
            audioElement.addEventListener('ended', () => {
                nextAyah();
            });
            
            audioElement.addEventListener('timeupdate', () => {
                updateProgress();
            });
            
            audioElement.addEventListener('loadedmetadata', () => {
                updateDuration();
            });
        }
        
        // Select Qari
        function selectQari(qari) {
            currentQari = qari;
            
            // Update button states
            document.querySelectorAll('.qari-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(qari + '-btn').classList.add('active');
            
            // Reload current ayah with new qari
            if (currentSurahNumber && currentAyahNumber) {
                loadAyah(currentSurahNumber, currentAyahNumber, false);
            }
        }
        
        // Load and play ayah
        function loadAyah(surahNum, ayahNum, autoPlay = true) {
            currentSurahNumber = surahNum;
            currentAyahNumber = ayahNum;
            
            // Format: 001001.mp3 (surah 3 digits, ayah 3 digits)
            const surahStr = String(surahNum).padStart(3, '0');
            const ayahStr = String(ayahNum).padStart(3, '0');
            const audioUrl = qariURLs[currentQari] + surahStr + ayahStr + '.mp3';
            
            audioElement.src = audioUrl;
            
            // Update UI
            const surah = surahs.find(s => s.number === surahNum);
            const qariLabel = qariNames[currentQari];
            document.getElementById('currentAyahText').textContent = 
                `${surah ? surah.english : 'Surah ' + surahNum} - Ayah ${ayahNum} | ${qariLabel}`;
            
            // Update button states
            document.getElementById('prevBtn').disabled = (ayahNum === 1);
            document.getElementById('nextBtn').disabled = (ayahNum >= totalAyahs);
            
            if (autoPlay) {
                audioElement.play();
                isPlaying = true;
                updatePlayPauseButton();
            }
        }
        
        // Toggle play/pause
        function togglePlayPause() {
            if (!audioElement.src) {
                // Start from ayah 1 if no audio loaded
                loadAyah(currentSurahNumber, 1, true);
                return;
            }
            
            if (isPlaying) {
                audioElement.pause();
                isPlaying = false;
            } else {
                audioElement.play();
                isPlaying = true;
            }
            updatePlayPauseButton();
        }
        
        // Update play/pause button
        function updatePlayPauseButton() {
            const playIcon = document.getElementById('playIcon');
            const pauseIcon = document.getElementById('pauseIcon');
            
            if (isPlaying) {
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
            } else {
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
            }
        }
        
        // Previous ayah
        function previousAyah() {
            if (currentAyahNumber > 1) {
                loadAyah(currentSurahNumber, currentAyahNumber - 1, isPlaying);
            }
        }
        
        // Next ayah
        function nextAyah() {
            if (currentAyahNumber < totalAyahs) {
                loadAyah(currentSurahNumber, currentAyahNumber + 1, isPlaying);
            } else {
                // Reached end of surah
                audioElement.pause();
                isPlaying = false;
                updatePlayPauseButton();
                document.getElementById('currentAyahText').textContent = 'Surah completed';
            }
        }
        
        // Update progress bar
        function updateProgress() {
            if (audioElement.duration) {
                const percent = (audioElement.currentTime / audioElement.duration) * 100;
                document.getElementById('progressFill').style.width = percent + '%';
                document.getElementById('currentTime').textContent = formatTime(audioElement.currentTime);
            }
        }
        
        // Update duration
        function updateDuration() {
            document.getElementById('duration').textContent = formatTime(audioElement.duration);
        }
        
        // Seek audio
        function seekAudio(event) {
            if (!audioElement.duration) return;
            
            const progressBar = event.currentTarget;
            const clickX = event.offsetX;
            const width = progressBar.offsetWidth;
            const percent = clickX / width;
            
            audioElement.currentTime = audioElement.duration * percent;
        }
        
        // Format time
        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return mins + ':' + (secs < 10 ? '0' : '') + secs;
        }
        
        const surahs = [
            { number: 1, arabic: 'ÿßŸÑŸÅÿßÿ™ÿ≠ÿ©', english: 'Al-Fatihah', verses: 7, revelation: 'Meccan' },
            { number: 2, arabic: 'ÿßŸÑÿ®ŸÇÿ±ÿ©', english: 'Al-Baqarah', verses: 286, revelation: 'Medinan' },
            { number: 3, arabic: 'ÿ¢ŸÑ ÿπŸÖÿ±ÿßŸÜ', english: 'Al-Imran', verses: 200, revelation: 'Medinan' },
            { number: 4, arabic: 'ÿßŸÑŸÜÿ≥ÿßÿ°', english: 'An-Nisa', verses: 176, revelation: 'Medinan' },
            { number: 5, arabic: 'ÿßŸÑŸÖÿßÿ¶ÿØÿ©', english: 'Al-Maidah', verses: 120, revelation: 'Medinan' },
            { number: 6, arabic: 'ÿßŸÑÿ£ŸÜÿπÿßŸÖ', english: 'Al-Anam', verses: 165, revelation: 'Meccan' },
            { number: 7, arabic: 'ÿßŸÑÿ£ÿπÿ±ÿßŸÅ', english: 'Al-Araf', verses: 206, revelation: 'Meccan' },
            { number: 8, arabic: 'ÿßŸÑÿ£ŸÜŸÅÿßŸÑ', english: 'Al-Anfal', verses: 75, revelation: 'Medinan' },
            { number: 9, arabic: 'ÿßŸÑÿ™Ÿàÿ®ÿ©', english: 'At-Taubah', verses: 129, revelation: 'Medinan' },
            { number: 10, arabic: 'ŸäŸàŸÜÿ≥', english: 'Yunus', verses: 109, revelation: 'Meccan' },
            { number: 11, arabic: 'ŸáŸàÿØ', english: 'Hud', verses: 123, revelation: 'Meccan' },
            { number: 12, arabic: 'ŸäŸàÿ≥ŸÅ', english: 'Yusuf', verses: 111, revelation: 'Meccan' },
            { number: 13, arabic: 'ÿßŸÑÿ±ÿπÿØ', english: 'Ar-Rad', verses: 43, revelation: 'Medinan' },
            { number: 14, arabic: 'ÿ•ÿ®ÿ±ÿßŸáŸäŸÖ', english: 'Ibrahim', verses: 52, revelation: 'Meccan' },
            { number: 15, arabic: 'ÿßŸÑÿ≠ÿ¨ÿ±', english: 'Al-Hijr', verses: 99, revelation: 'Meccan' },
            { number: 16, arabic: 'ÿßŸÑŸÜÿ≠ŸÑ', english: 'An-Nahl', verses: 128, revelation: 'Meccan' },
            { number: 17, arabic: 'ÿßŸÑÿ•ÿ≥ÿ±ÿßÿ°', english: 'Al-Isra', verses: 111, revelation: 'Meccan' },
            { number: 18, arabic: 'ÿßŸÑŸÉŸáŸÅ', english: 'Al-Kahf', verses: 110, revelation: 'Meccan' },
            { number: 19, arabic: 'ŸÖÿ±ŸäŸÖ', english: 'Maryam', verses: 98, revelation: 'Meccan' },
            { number: 20, arabic: 'ÿ∑Ÿá', english: 'Ta-Ha', verses: 135, revelation: 'Meccan' },
            { number: 21, arabic: 'ÿßŸÑÿ£ŸÜÿ®Ÿäÿßÿ°', english: 'Al-Anbiya', verses: 112, revelation: 'Meccan' },
            { number: 22, arabic: 'ÿßŸÑÿ≠ÿ¨', english: 'Al-Hajj', verses: 78, revelation: 'Medinan' },
            { number: 23, arabic: 'ÿßŸÑŸÖÿ§ŸÖŸÜŸàŸÜ', english: 'Al-Muminun', verses: 118, revelation: 'Meccan' },
            { number: 24, arabic: 'ÿßŸÑŸÜŸàÿ±', english: 'An-Nur', verses: 64, revelation: 'Medinan' },
            { number: 25, arabic: 'ÿßŸÑŸÅÿ±ŸÇÿßŸÜ', english: 'Al-Furqan', verses: 77, revelation: 'Meccan' },
            { number: 26, arabic: 'ÿßŸÑÿ¥ÿπÿ±ÿßÿ°', english: 'Ash-Shuara', verses: 227, revelation: 'Meccan' },
            { number: 27, arabic: 'ÿßŸÑŸÜŸÖŸÑ', english: 'An-Naml', verses: 93, revelation: 'Meccan' },
            { number: 28, arabic: 'ÿßŸÑŸÇÿµÿµ', english: 'Al-Qasas', verses: 88, revelation: 'Meccan' },
            { number: 29, arabic: 'ÿßŸÑÿπŸÜŸÉÿ®Ÿàÿ™', english: 'Al-Ankabut', verses: 69, revelation: 'Meccan' },
            { number: 30, arabic: 'ÿßŸÑÿ±ŸàŸÖ', english: 'Ar-Rum', verses: 60, revelation: 'Meccan' },
            { number: 31, arabic: 'ŸÑŸÇŸÖÿßŸÜ', english: 'Luqman', verses: 34, revelation: 'Meccan' },
            { number: 32, arabic: 'ÿßŸÑÿ≥ÿ¨ÿØÿ©', english: 'As-Sajdah', verses: 30, revelation: 'Meccan' },
            { number: 33, arabic: 'ÿßŸÑÿ£ÿ≠ÿ≤ÿßÿ®', english: 'Al-Ahzab', verses: 73, revelation: 'Medinan' },
            { number: 34, arabic: 'ÿ≥ÿ®ÿ£', english: 'Saba', verses: 54, revelation: 'Meccan' },
            { number: 35, arabic: 'ŸÅÿßÿ∑ÿ±', english: 'Fatir', verses: 45, revelation: 'Meccan' },
            { number: 36, arabic: 'Ÿäÿ≥', english: 'Ya-Sin', verses: 83, revelation: 'Meccan' },
            { number: 37, arabic: 'ÿßŸÑÿµÿßŸÅÿßÿ™', english: 'As-Saffat', verses: 182, revelation: 'Meccan' },
            { number: 38, arabic: 'ÿµ', english: 'Sad', verses: 88, revelation: 'Meccan' },
            { number: 39, arabic: 'ÿßŸÑÿ≤ŸÖÿ±', english: 'Az-Zumar', verses: 75, revelation: 'Meccan' },
            { number: 40, arabic: 'ÿ∫ÿßŸÅÿ±', english: 'Ghafir', verses: 85, revelation: 'Meccan' },
            { number: 41, arabic: 'ŸÅÿµŸÑÿ™', english: 'Fussilat', verses: 54, revelation: 'Meccan' },
            { number: 42, arabic: 'ÿßŸÑÿ¥Ÿàÿ±Ÿâ', english: 'Ash-Shura', verses: 53, revelation: 'Meccan' },
            { number: 43, arabic: 'ÿßŸÑÿ≤ÿÆÿ±ŸÅ', english: 'Az-Zukhruf', verses: 89, revelation: 'Meccan' },
            { number: 44, arabic: 'ÿßŸÑÿØÿÆÿßŸÜ', english: 'Ad-Dukhan', verses: 59, revelation: 'Meccan' },
            { number: 45, arabic: 'ÿßŸÑÿ¨ÿßÿ´Ÿäÿ©', english: 'Al-Jathiyah', verses: 37, revelation: 'Meccan' },
            { number: 46, arabic: 'ÿßŸÑÿ£ÿ≠ŸÇÿßŸÅ', english: 'Al-Ahqaf', verses: 35, revelation: 'Meccan' },
            { number: 47, arabic: 'ŸÖÿ≠ŸÖÿØ', english: 'Muhammad', verses: 38, revelation: 'Medinan' },
            { number: 48, arabic: 'ÿßŸÑŸÅÿ™ÿ≠', english: 'Al-Fath', verses: 29, revelation: 'Medinan' },
            { number: 49, arabic: 'ÿßŸÑÿ≠ÿ¨ÿ±ÿßÿ™', english: 'Al-Hujurat', verses: 18, revelation: 'Medinan' },
            { number: 50, arabic: 'ŸÇ', english: 'Qaf', verses: 45, revelation: 'Meccan' },
            { number: 51, arabic: 'ÿßŸÑÿ∞ÿßÿ±Ÿäÿßÿ™', english: 'Adh-Dhariyat', verses: 60, revelation: 'Meccan' },
            { number: 52, arabic: 'ÿßŸÑÿ∑Ÿàÿ±', english: 'At-Tur', verses: 49, revelation: 'Meccan' },
            { number: 53, arabic: 'ÿßŸÑŸÜÿ¨ŸÖ', english: 'An-Najm', verses: 62, revelation: 'Meccan' },
            { number: 54, arabic: 'ÿßŸÑŸÇŸÖÿ±', english: 'Al-Qamar', verses: 55, revelation: 'Meccan' },
            { number: 55, arabic: 'ÿßŸÑÿ±ÿ≠ŸÖŸÜ', english: 'Ar-Rahman', verses: 78, revelation: 'Medinan' },
            { number: 56, arabic: 'ÿßŸÑŸàÿßŸÇÿπÿ©', english: 'Al-Waqiah', verses: 96, revelation: 'Meccan' },
            { number: 57, arabic: 'ÿßŸÑÿ≠ÿØŸäÿØ', english: 'Al-Hadid', verses: 29, revelation: 'Medinan' },
            { number: 58, arabic: 'ÿßŸÑŸÖÿ¨ÿßÿØŸÑÿ©', english: 'Al-Mujadalah', verses: 22, revelation: 'Medinan' },
            { number: 59, arabic: 'ÿßŸÑÿ≠ÿ¥ÿ±', english: 'Al-Hashr', verses: 24, revelation: 'Medinan' },
            { number: 60, arabic: 'ÿßŸÑŸÖŸÖÿ™ÿ≠ŸÜÿ©', english: 'Al-Mumtahanah', verses: 13, revelation: 'Medinan' },
            { number: 61, arabic: 'ÿßŸÑÿµŸÅ', english: 'As-Saff', verses: 14, revelation: 'Medinan' },
            { number: 62, arabic: 'ÿßŸÑÿ¨ŸÖÿπÿ©', english: 'Al-Jumah', verses: 11, revelation: 'Medinan' },
            { number: 63, arabic: 'ÿßŸÑŸÖŸÜÿßŸÅŸÇŸàŸÜ', english: 'Al-Munafiqun', verses: 11, revelation: 'Medinan' },
            { number: 64, arabic: 'ÿßŸÑÿ™ÿ∫ÿßÿ®ŸÜ', english: 'At-Taghabun', verses: 18, revelation: 'Medinan' },
            { number: 65, arabic: 'ÿßŸÑÿ∑ŸÑÿßŸÇ', english: 'At-Talaq', verses: 12, revelation: 'Medinan' },
            { number: 66, arabic: 'ÿßŸÑÿ™ÿ≠ÿ±ŸäŸÖ', english: 'At-Tahrim', verses: 12, revelation: 'Medinan' },
            { number: 67, arabic: 'ÿßŸÑŸÖŸÑŸÉ', english: 'Al-Mulk', verses: 30, revelation: 'Meccan' },
            { number: 68, arabic: 'ÿßŸÑŸÇŸÑŸÖ', english: 'Al-Qalam', verses: 52, revelation: 'Meccan' },
            { number: 69, arabic: 'ÿßŸÑÿ≠ÿßŸÇÿ©', english: 'Al-Haqqah', verses: 52, revelation: 'Meccan' },
            { number: 70, arabic: 'ÿßŸÑŸÖÿπÿßÿ±ÿ¨', english: 'Al-Maarij', verses: 44, revelation: 'Meccan' },
            { number: 71, arabic: 'ŸÜŸàÿ≠', english: 'Nuh', verses: 28, revelation: 'Meccan' },
            { number: 72, arabic: 'ÿßŸÑÿ¨ŸÜ', english: 'Al-Jinn', verses: 28, revelation: 'Meccan' },
            { number: 73, arabic: 'ÿßŸÑŸÖÿ≤ŸÖŸÑ', english: 'Al-Muzzammil', verses: 20, revelation: 'Meccan' },
            { number: 74, arabic: 'ÿßŸÑŸÖÿØÿ´ÿ±', english: 'Al-Muddathir', verses: 56, revelation: 'Meccan' },
            { number: 75, arabic: 'ÿßŸÑŸÇŸäÿßŸÖÿ©', english: 'Al-Qiyamah', verses: 40, revelation: 'Meccan' },
            { number: 76, arabic: 'ÿßŸÑÿ•ŸÜÿ≥ÿßŸÜ', english: 'Al-Insan', verses: 31, revelation: 'Medinan' },
            { number: 77, arabic: 'ÿßŸÑŸÖÿ±ÿ≥ŸÑÿßÿ™', english: 'Al-Mursalat', verses: 50, revelation: 'Meccan' },
            { number: 78, arabic: 'ÿßŸÑŸÜÿ®ÿ£', english: 'An-Naba', verses: 40, revelation: 'Meccan' },
            { number: 79, arabic: 'ÿßŸÑŸÜÿßÿπÿßÿ™', english: 'An-Naziat', verses: 46, revelation: 'Meccan' },
            { number: 80, arabic: 'ÿπÿ®ÿ≥', english: 'Abasa', verses: 42, revelation: 'Meccan' },
            { number: 81, arabic: 'ÿßŸÑÿ™ŸÉŸàŸäÿ±', english: 'At-Takwir', verses: 29, revelation: 'Meccan' },
            { number: 82, arabic: 'ÿßŸÑÿßŸÜŸÅÿ∑ÿßÿ±', english: 'Al-Infitar', verses: 19, revelation: 'Meccan' },
            { number: 83, arabic: 'ÿßŸÑŸÖÿ∑ŸÅŸÅŸäŸÜ', english: 'Al-Mutaffifin', verses: 36, revelation: 'Meccan' },
            { number: 84, arabic: 'ÿßŸÑÿßŸÜÿ¥ŸÇÿßŸÇ', english: 'Al-Inshiqaq', verses: 25, revelation: 'Meccan' },
            { number: 85, arabic: 'ÿßŸÑÿ®ÿ±Ÿàÿ¨', english: 'Al-Buruj', verses: 22, revelation: 'Meccan' },
            { number: 86, arabic: 'ÿßŸÑÿ∑ÿßÿ±ŸÇ', english: 'At-Tariq', verses: 17, revelation: 'Meccan' },
            { number: 87, arabic: 'ÿßŸÑÿ£ÿπŸÑŸâ', english: 'Al-Ala', verses: 19, revelation: 'Meccan' },
            { number: 88, arabic: 'ÿßŸÑÿ∫ÿßÿ¥Ÿäÿ©', english: 'Al-Ghashiyah', verses: 26, revelation: 'Meccan' },
            { number: 89, arabic: 'ÿßŸÑŸÅÿ¨ÿ±', english: 'Al-Fajr', verses: 30, revelation: 'Meccan' },
            { number: 90, arabic: 'ÿßŸÑÿ®ŸÑÿØ', english: 'Al-Balad', verses: 20, revelation: 'Meccan' },
            { number: 91, arabic: 'ÿßŸÑÿ¥ŸÖÿ≥', english: 'Ash-Shams', verses: 15, revelation: 'Meccan' },
            { number: 92, arabic: 'ÿßŸÑŸÑŸäŸÑ', english: 'Al-Lail', verses: 21, revelation: 'Meccan' },
            { number: 93, arabic: 'ÿßŸÑÿ∂ÿ≠Ÿâ', english: 'Ad-Duha', verses: 11, revelation: 'Meccan' },
            { number: 94, arabic: 'ÿßŸÑÿ¥ÿ±ÿ≠', english: 'Ash-Sharh', verses: 8, revelation: 'Meccan' },
            { number: 95, arabic: 'ÿßŸÑÿ™ŸäŸÜ', english: 'At-Tin', verses: 8, revelation: 'Meccan' },
            { number: 96, arabic: 'ÿßŸÑÿπŸÑŸÇ', english: 'Al-Alaq', verses: 19, revelation: 'Meccan' },
            { number: 97, arabic: 'ÿßŸÑŸÇÿØÿ±', english: 'Al-Qadr', verses: 5, revelation: 'Meccan' },
            { number: 98, arabic: 'ÿßŸÑÿ®ŸäŸÜÿ©', english: 'Al-Bayyinah', verses: 8, revelation: 'Medinan' },
            { number: 99, arabic: 'ÿßŸÑÿ≤ŸÑÿ≤ŸÑÿ©', english: 'Az-Zalzalah', verses: 8, revelation: 'Medinan' },
            { number: 100, arabic: 'ÿßŸÑÿπÿßÿØŸäÿßÿ™', english: 'Al-Adiyat', verses: 11, revelation: 'Meccan' },
            { number: 101, arabic: 'ÿßŸÑŸÇÿßÿ±ÿπÿ©', english: 'Al-Qaria', verses: 11, revelation: 'Meccan' },
            { number: 102, arabic: 'ÿßŸÑÿ™ŸÉÿßÿ´ÿ±', english: 'At-Takathur', verses: 8, revelation: 'Meccan' },
            { number: 103, arabic: 'ÿßŸÑÿπÿµÿ±', english: 'Al-Asr', verses: 3, revelation: 'Meccan' },
            { number: 104, arabic: 'ÿßŸÑŸáŸÖÿ≤ÿ©', english: 'Al-Humaza', verses: 9, revelation: 'Meccan' },
            { number: 105, arabic: 'ÿßŸÑŸÅŸäŸÑ', english: 'Al-Fil', verses: 5, revelation: 'Meccan' },
            { number: 106, arabic: 'ŸÇÿ±Ÿäÿ¥', english: 'Quraysh', verses: 4, revelation: 'Meccan' },
            { number: 107, arabic: 'ÿßŸÑŸÖÿßÿπŸàŸÜ', english: 'Al-Maun', verses: 7, revelation: 'Meccan' },
            { number: 108, arabic: 'ÿßŸÑŸÉŸàÿ´ÿ±', english: 'Al-Kawthar', verses: 3, revelation: 'Meccan' },
            { number: 109, arabic: 'ÿßŸÑŸÉÿßŸÅÿ±ŸàŸÜ', english: 'Al-Kafirun', verses: 6, revelation: 'Meccan' },
            { number: 110, arabic: 'ÿßŸÑŸÜÿµÿ±', english: 'An-Nasr', verses: 3, revelation: 'Medinan' },
            { number: 111, arabic: 'ÿßŸÑŸÖÿ≥ÿØ', english: 'Al-Masad', verses: 5, revelation: 'Meccan' },
            { number: 112, arabic: 'ÿßŸÑÿ•ÿÆŸÑÿßÿµ', english: 'Al-Ikhlas', verses: 4, revelation: 'Meccan' },
            { number: 113, arabic: 'ÿßŸÑŸÅŸÑŸÇ', english: 'Al-Falaq', verses: 5, revelation: 'Meccan' },
            { number: 114, arabic: 'ÿßŸÑŸÜÿßÿ≥', english: 'An-Nas', verses: 6, revelation: 'Meccan' }
        ];

        function renderSurahs(filtered = surahs) {
            const grid = document.getElementById('quranGrid');
            grid.innerHTML = '';
            
            filtered.forEach(surah => {
                const card = document.createElement('div');
                card.className = 'surah-card';
                card.innerHTML = `
                    <div class="surah-number">Surah ${surah.number}</div>
                    <div class="surah-arabic">${surah.arabic}</div>
                    <div class="surah-english">${surah.english}</div>
                    <div class="surah-info">
                        <span>${surah.verses} verses</span>
                        <span>${surah.revelation}</span>
                    </div>
                `;
                card.addEventListener('click', () => loadMushaf(surah));
                grid.appendChild(card);
            });
        }

        // Load Mushaf view with Indo-Pak text
        async function loadMushaf(surah) {
            const modal = document.getElementById('mushafModal');
            const pageContent = document.querySelector('.page-content');
            const title = document.getElementById('mushafTitle');
            const info = document.getElementById('mushafInfo');
            const verses = document.getElementById('mushafVerses');
            const audioPlayer = document.getElementById('audioPlayer');
            
            title.textContent = surah.arabic;
            info.textContent = `${surah.english} - ${surah.verses} Verses - ${surah.revelation}`;
            verses.innerHTML = '<p style="text-align: center; color: var(--color-gray-400);">Loading...</p>';
            
            // Show/hide audio player based on mode
            if (currentMode === 'audio') {
                audioPlayer.style.display = 'block';
                // Initialize audio player for this surah
                currentSurahNumber = surah.number;
                currentAyahNumber = 1;
                totalAyahs = surah.verses;
                isPlaying = false;
                updatePlayPauseButton();
                document.getElementById('currentAyahText').textContent = 'Select play to begin recitation';
                document.getElementById('prevBtn').disabled = true;
                document.getElementById('nextBtn').disabled = false;
                document.getElementById('progressFill').style.width = '0%';
                document.getElementById('currentTime').textContent = '0:00';
                document.getElementById('duration').textContent = '0:00';
                
                // Stop any playing audio
                if (audioElement && audioElement.src) {
                    audioElement.pause();
                    audioElement.src = '';
                }
            } else {
                audioPlayer.style.display = 'none';
                currentSurahNumber = surah.number;
                totalAyahs = surah.verses;
            }
            
            modal.classList.add('active');
            pageContent.style.display = 'none';
            document.body.style.overflow = 'hidden';
            
            try {
                // Load Arabic only
                const ayahs = await getSurahAyahs(surah.number);
                
                if (ayahs && ayahs.length > 0) {
                    displayMushaf(ayahs);
                    
                    // If a target ayah was set, scroll to it
                    if (targetAyahNumber) {
                        setTimeout(() => {
                            const ayahElements = document.querySelectorAll('.ayah-number');
                            for (let elem of ayahElements) {
                                if (elem.textContent.includes(targetAyahNumber.toString())) {
                                    elem.scrollIntoView({ behavior: 'smooth', block: 'center' });
                                    // Highlight the ayah number
                                    elem.style.animation = 'none';
                                    setTimeout(() => {
                                        elem.style.animation = 'pulse 1s ease-in-out 3';
                                    }, 100);
                                    break;
                                }
                            }
                            targetAyahNumber = null;
                        }, 300);
                    }
                } else {
                    verses.innerHTML = '<p style="color: var(--color-gray-400);">Unable to load Surah text</p>';
                }
            } catch (error) {
                console.error('Error loading Surah:', error);
                verses.innerHTML = '<p style="color: var(--color-gray-400);">Error loading Surah. Please try again.</p>';
            }
        }

        // Display Mushaf with Indo-Pak Nastaleeq text
        function displayMushaf(ayahs) {
            const container = document.getElementById('mushafVerses');
            container.innerHTML = '';
            
            // Display Bismillah separately at the top
            const bismillahDiv = document.createElement('div');
            bismillahDiv.style.cssText = `
                text-align: center;
                font-size: 1.75rem;
                color: var(--color-neon-green);
                margin-bottom: 2rem;
                padding: 1.5rem;
                border-bottom: 2px solid var(--color-neon-green);
                text-shadow: 0 0 10px rgba(45, 212, 20, 0.3);
            `;
            bismillahDiv.innerHTML = 'ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸéŸëŸáŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸ∞ŸÜŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸêŸäŸÖŸê';
            bismillahDiv.className = 'indopak-text';
            container.appendChild(bismillahDiv);
            
            // Filter out if first ayah contains Bismillah (some surahs have it)
            let filteredAyahs = ayahs.filter((ayah, idx) => {
                if (idx === 0 && ayah.text.includes('ÿ®Ÿêÿ≥ŸíŸÖŸê')) {
                    return false;
                }
                return true;
            });
            
            // Create blocks based on the formatted ayahs
            createBlocksByLineCount(filteredAyahs);
        }

        // Create blocks based on line count (16 lines per block)
        function createBlocksByLineCount(ayahsData) {
            const container = document.getElementById('mushafVerses');
            let blockContent = [];
            let wordCount = 0;
            const WORDS_PER_BLOCK = 112; // Approximately 16 lines √ó 7 words per line
            
            ayahsData.forEach((ayah, index) => {
                const text = ayah.text;
                const number = ayah.number ? ayah.number.inSurah : ayah.number;
                const words = text.split(' ').length;
                
                blockContent.push({
                    text: text,
                    number: number
                });
                wordCount += words;
                
                // Create block when reaching ~112 words (16 lines) or at the end
                if (wordCount >= WORDS_PER_BLOCK || index === ayahsData.length - 1) {
                    const blockDiv = document.createElement('div');
                    blockDiv.className = 'ayah-block indopak-text';
                    
                    let blockHTML = '';
                    blockContent.forEach(item => {
                        if (currentMode === 'audio') {
                            blockHTML += item.text + ` <span class="ayah-number" onclick="openQariPopup(${item.number})" title="Click to play this ayah">[${item.number}]</span> `;
                        } else {
                            blockHTML += item.text + ` <span class="ayah-number" onclick="openAyahSavePopup(${item.number})" title="Click to save this ayah">[${item.number}]</span> `;
                        }
                    });
                    
                    blockDiv.innerHTML = `<div class="ayah-text">${blockHTML.trim()}</div>`;
                    container.appendChild(blockDiv);
                    
                    blockContent = [];
                    wordCount = 0;
                }
            });
        }

        // Close Mushaf modal
        function closeMushaf() {
            const modal = document.getElementById('mushafModal');
            const pageContent = document.querySelector('.page-content');
            
            // Stop audio playback
            if (audioElement) {
                audioElement.pause();
                audioElement.src = '';
                isPlaying = false;
                updatePlayPauseButton();
            }
            
            modal.classList.remove('active');
            pageContent.style.display = 'block';
            document.body.style.overflow = 'auto';
        }

        // Close modal when clicking outside
        document.getElementById('mushafModal').addEventListener('click', (e) => {
            if (e.target.id === 'mushafModal') {
                closeMushaf();
            }
        });

        // Search functionality
        document.getElementById('surahSearch').addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            const filtered = surahs.filter(surah => 
                surah.english.toLowerCase().includes(query) ||
                surah.number.toString().includes(query) ||
                surah.arabic.includes(query)
            );
            renderSurahs(filtered);
        });

        // Initial render
        renderSurahs();
        
        // Initialize audio player
        window.addEventListener('DOMContentLoaded', () => {
            initAudio();
        });
    </script>
    <script src="js/quran-data.js"></script>
</body>
</html>
